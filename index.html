<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AmirVM | Channel Hub</title>
    <style>
        body {
            background: radial-gradient(circle at top right, #1e272e, #000000);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Tahoma', sans-serif;
            margin: 0;
            color: white;
            padding: 20px;
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, #00d2ff, #92fe9d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            width: 100%;
            max-width: 600px;
            padding: 30px;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        .card-tag {
            position: absolute;
            top: -15px;
            right: 25px;
            background: #ff4757;
            padding: 5px 15px;
            border-radius: 10px;
            font-size: 0.8rem;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ù†Ù‚Ù„ Ù‚ÙˆÙ„ (Ú©Ø§Ù†ÙÛŒÚ¯) */
        blockquote {
            background: rgba(0, 0, 0, 0.3);
            border-right: 5px solid #00d2ff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
            font-family: monospace;
            word-break: break-all;
            white-space: pre-wrap;
            max-height: 100px;
            overflow: hidden;
            position: relative;
        }

        blockquote.expanded {
            max-height: none;
        }

        .media-container img {
            width: 100%;
            border-radius: 15px;
            margin-bottom: 15px;
        }

        .btn {
            cursor: pointer;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
            margin: 5px;
            transition: 0.3s;
        }

        .btn-copy { background: #00d2ff; color: black; }
        .btn-more { background: #57606f; color: white; }
        .btn-download { background: #2ed573; color: white; text-decoration: none; display: inline-block; }

        .btn:hover { opacity: 0.8; }
    </style>
</head>
<body>

    <h1>amirvm</h1>

    <div class="glass-card" id="main-card">
        <div class="card-tag">Ø¢Ø®Ø±ÛŒÙ† Ø¢Ù¾Ø¯ÛŒØª</div>
        <div id="content-area">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...</div>
    </div>

    <script>
        const token = '8476367811:AAEksH5pVfmJ3N4KFsbqZseLT23VqGRa25s';

        async function getFileLink(fileId) {
            const res = await fetch(`https://api.telegram.org/bot${token}/getFile?file_id=${fileId}`);
            const data = await res.json();
            if(data.ok) {
                return `https://api.telegram.org/file/bot${token}/${data.result.file_path}`;
            }
            return null;
        }

        async function fetchData() {
            const response = await fetch(`https://api.telegram.org/bot${token}/getUpdates?offset=-1`);
            const data = await response.json();

            if (data.ok && data.result.length > 0) {
                const post = data.result[0].channel_post;
                const area = document.getElementById('content-area');
                area.innerHTML = ''; // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙˆØ¶Ø¹ÛŒØª Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ

                let text = post.text || post.caption || "";
                
                // Û±. Ù…Ø¯ÛŒØ±ÛŒØª Ø¹Ú©Ø³
                if (post.photo) {
                    const fileId = post.photo[post.photo.length - 1].file_id;
                    const imgUrl = await getFileLink(fileId);
                    area.innerHTML += `<div class="media-container"><img src="${imgUrl}"><br><a href="${imgUrl}" download class="btn btn-download">Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¹Ú©Ø³</a></div>`;
                }

                // Û². Ù…Ø¯ÛŒØ±ÛŒØª ÙØ§ÛŒÙ„ (Document)
                if (post.document) {
                    const fileUrl = await getFileLink(post.document.file_id);
                    area.innerHTML += `<div class="media-container">ğŸ“„ ÙØ§ÛŒÙ„: ${post.document.file_name}<br><a href="${fileUrl}" download class="btn btn-download">Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„</a></div>`;
                }

                // Û³. Ù…Ø¯ÛŒØ±ÛŒØª Ù…ØªÙ† Ùˆ Ú©Ø§Ù†ÙÛŒÚ¯ (Ù†Ù‚Ù„ Ù‚ÙˆÙ„)
                if (text) {
                    const isLong = text.length > 150;
                    const displayContainer = document.createElement('div');
                    
                    // Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ø®Ø´ Ù†Ù‚Ù„ Ù‚ÙˆÙ„
                    const bq = document.createElement('blockquote');
                    bq.id = 'config-text';
                    bq.innerText = text;
                    displayContainer.appendChild(bq);

                    // Ø¯Ú©Ù…Ù‡ Ú©Ù¾ÛŒ
                    const copyBtn = document.createElement('button');
                    copyBtn.className = 'btn btn-copy';
                    copyBtn.innerText = 'Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù†';
                    copyBtn.onclick = () => {
                        navigator.clipboard.writeText(text);
                        alert('Ú©Ù¾ÛŒ Ø´Ø¯!');
                    };
                    displayContainer.appendChild(copyBtn);

                    // Ø¯Ú©Ù…Ù‡ Ø§Ø¯Ø§Ù…Ù‡ (Ø§Ú¯Ø± Ø·ÙˆÙ„Ø§Ù†ÛŒ Ø¨ÙˆØ¯)
                    if (isLong) {
                        const moreBtn = document.createElement('button');
                        moreBtn.className = 'btn btn-more';
                        moreBtn.innerText = 'Ø¯ÛŒØ¯Ù† Ø§Ø¯Ø§Ù…Ù‡';
                        moreBtn.onclick = () => {
                            bq.classList.toggle('expanded');
                            moreBtn.innerText = bq.classList.contains('expanded') ? 'Ø¨Ø³ØªÙ†' : 'Ø¯ÛŒØ¯Ù† Ø§Ø¯Ø§Ù…Ù‡';
                        };
                        displayContainer.appendChild(moreBtn);
                    }

                    area.appendChild(displayContainer);
                }
            }
        }

        fetchData();
    </script>
</body>
</html>
